import{a as w,r as c,j as e}from"./index-BH6IK7iT.js";import{b as P,g as V,S as y,e as C,d as k,c as R,a as I,C as O,R as J}from"./safariErrorRecovery-DQncS7Kh.js";import{c as _}from"./createLucideIcon-BlRbHpX6.js";import{C as $}from"./circle-check-big-n0vGfdgR.js";/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]],M=_("test-tube",L),K=()=>{const{addToCart:x,cartItems:l,clearCart:g}=w(),[u,m]=c.useState({}),[f,p]=c.useState(!1),[i,j]=c.useState(!1),[N,S]=c.useState(!0),b={id:1,name:"Test Sneaker",price:1500,image:"/api/placeholder/300/300",brand:"Test Brand"},d=P();c.useEffect(()=>{i?(window._simulatedSafari=!0,window._simulatedIOSSafari=!0):(delete window._simulatedSafari,delete window._simulatedIOSSafari)},[i]);const h=async(a,n)=>{console.log(`🧪 Running test: ${a}`),m(s=>({...s,[a]:{status:"running",result:null,error:null}}));try{const s=await n();return console.log(`✅ Test passed: ${a}`,s),m(r=>({...r,[a]:{status:"passed",result:s,error:null}})),!0}catch(s){return console.error(`❌ Test failed: ${a}`,s),m(r=>({...r,[a]:{status:"failed",result:null,error:s.message}})),!1}},v=async()=>{p(!0),m({});const a=[{name:"Safari Detection",test:async()=>{const s=k();return i?{...s,simulated:!0}:s}},{name:"EmailJS Compatibility",test:async()=>R()},{name:"LocalStorage Test",test:async()=>{const s="safari_test_"+Date.now(),r={test:!0,timestamp:Date.now()},o=d.safeLocalStorageSet(s,r),t=d.safeLocalStorageGet(s);try{localStorage.removeItem(s)}catch{}return{setSuccess:o,getValue:t,dataMatches:JSON.stringify(t)===JSON.stringify(r)}}},{name:"Cart Operations",test:async()=>{const s=l.length;x(b,1,"42"),await new Promise(t=>setTimeout(t,100));const r=l.length,o=l.some(t=>t.id===b.id&&t.selectedSize==="42");return{initialCount:s,afterAdd:r,hasTestItem:o,cartOperationSuccessful:o}}},{name:"EmailJS Diagnostic",test:async()=>await I()},{name:"Form Submission Simulation",test:async()=>{const s=async()=>{if(await new Promise(r=>setTimeout(r,500)),i&&Math.random()<.3)throw new Error("Simulated Safari network timeout");return{success:!0,timestamp:Date.now()}};return await d.safariFormSubmit(s,2)}}];let n=0;for(const{name:s,test:r}of a)await h(s,r)&&n++,await new Promise(t=>setTimeout(t,200));p(!1),console.log(`🏁 Test suite completed: ${n}/${a.length} tests passed`)},T=(a,n)=>{if(!n)return null;const s=()=>{switch(n.status){case"running":return e.jsxDEV(J,{className:"w-4 h-4 animate-spin text-blue-500"},void 0,!1,{fileName:"/app/code/src/components/SafariTestPage.jsx",lineNumber:179,columnNumber:18},void 0);case"passed":return e.jsxDEV($,{className:"w-4 h-4 text-green-500"},void 0,!1,{fileName:"/app/code/src/components/SafariTestPage.jsx",lineNumber:181,columnNumber:18},void 0);case"failed":return e.jsxDEV(O,{className:"w-4 h-4 text-red-500"},void 0,!1,{fileName:"/app/code/src/components/SafariTestPage.jsx",lineNumber:183,columnNumber:18},void 0);default:return null}},r=()=>{switch(n.status){case"running":return"border-blue-200 bg-blue-50";case"passed":return"border-green-200 bg-green-50";case"failed":return"border-red-200 bg-red-50";default:return"border-gray-200 bg-gray-50"}};return e.jsxDEV("div",{className:`border rounded-lg p-3 ${r()}`,children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-2",children:[e.jsxDEV("h4",{className:"font-medium text-sm",children:a},void 0,!1,{fileName:"/app/code/src/components/SafariTestPage.jsx",lineNumber:205,columnNumber:11},void 0),s()]},void 0,!0,{fileName:"/app/code/src/components/SafariTestPage.jsx",lineNumber:204,columnNumber:9},void 0),n.error&&e.jsxDEV("p",{className:"text-sm text-red-600 mb-2",children:n.error},void 0,!1,{fileName:"/app/code/src/components/SafariTestPage.jsx",lineNumber:210,columnNumber:11},void 0),n.result&&e.jsxDEV("pre",{className:"text-xs bg-white p-2 rounded border overflow-auto max-h-32",children:JSON.stringify(n.result,null,2)},void 0,!1,{fileName:"/app/code/src/components/SafariTestPage.jsx",lineNumber:214,columnNumber:11},void 0)]},void 0,!0,{fileName:"/app/code/src/components/SafariTestPage.jsx",lineNumber:203,columnNumber:7},void 0)},E=()=>{g()},D=()=>{C()};return e.jsxDEV("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsxDEV("div",{className:"max-w-4xl mx-auto px-4",children:[e.jsxDEV("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[e.jsxDEV("div",{className:"flex items-center gap-3 mb-6",children:[e.jsxDEV(M,{className:"w-6 h-6 text-blue-500"},void 0,!1,{fileName:"/app/code/src/components/SafariTestPage.jsx",lineNumber:235,columnNumber:13},void 0),e.jsxDEV("h1",{className:"text-2xl font-bold text-gray-900",children:"Safari/iOS Testing Suite"},void 0,!1,{fileName:"/app/code/src/components/SafariTestPage.jsx",lineNumber:236,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/SafariTestPage.jsx",lineNumber:234,columnNumber:11},void 0),e.jsxDEV("div",{className:"grid md:grid-cols-2 gap-6 mb-6",children:[e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("h2",{className:"text-lg font-semibold text-gray-800",children:"Test Controls"},void 0,!1,{fileName:"/app/code/src/components/SafariTestPage.jsx",lineNumber:241,columnNumber:15},void 0),e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV("label",{className:"flex items-center gap-2",children:[e.jsxDEV("input",{type:"checkbox",checked:i,onChange:a=>j(a.target.checked),className:"w-4 h-4"},void 0,!1,{fileName:"/app/code/src/components/SafariTestPage.jsx",lineNumber:245,columnNumber:19},void 0),e.jsxDEV("span",{className:"text-sm",children:"Simulate Safari Environment"},void 0,!1,{fileName:"/app/code/src/components/SafariTestPage.jsx",lineNumber:251,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/src/components/SafariTestPage.jsx",lineNumber:244,columnNumber:17},void 0),e.jsxDEV("label",{className:"flex items-center gap-2",children:[e.jsxDEV("input",{type:"checkbox",checked:N,onChange:a=>S(a.target.checked),className:"w-4 h-4"},void 0,!1,{fileName:"/app/code/src/components/SafariTestPage.jsx",lineNumber:255,columnNumber:19},void 0),e.jsxDEV("span",{className:"text-sm",children:"Show Diagnostic Panel"},void 0,!1,{fileName:"/app/code/src/components/SafariTestPage.jsx",lineNumber:261,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/src/components/SafariTestPage.jsx",lineNumber:254,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/src/components/SafariTestPage.jsx",lineNumber:243,columnNumber:15},void 0),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("button",{onClick:v,disabled:f,className:"w-full bg-blue-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:f?"Running Tests...":"Run All Tests"},void 0,!1,{fileName:"/app/code/src/components/SafariTestPage.jsx",lineNumber:266,columnNumber:17},void 0),e.jsxDEV("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxDEV("button",{onClick:E,className:"bg-gray-600 text-white px-3 py-2 rounded text-sm hover:bg-gray-700",children:"Clear Cart"},void 0,!1,{fileName:"/app/code/src/components/SafariTestPage.jsx",lineNumber:275,columnNumber:19},void 0),e.jsxDEV("button",{onClick:D,className:"bg-red-600 text-white px-3 py-2 rounded text-sm hover:bg-red-700",children:"Clear Errors"},void 0,!1,{fileName:"/app/code/src/components/SafariTestPage.jsx",lineNumber:281,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/src/components/SafariTestPage.jsx",lineNumber:274,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/src/components/SafariTestPage.jsx",lineNumber:265,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/SafariTestPage.jsx",lineNumber:240,columnNumber:13},void 0),e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("h2",{className:"text-lg font-semibold text-gray-800",children:"Current Status"},void 0,!1,{fileName:"/app/code/src/components/SafariTestPage.jsx",lineNumber:292,columnNumber:15},void 0),e.jsxDEV("div",{className:"space-y-2 text-sm",children:[e.jsxDEV("div",{className:"flex justify-between",children:[e.jsxDEV("span",{children:"Cart Items:"},void 0,!1,{fileName:"/app/code/src/components/SafariTestPage.jsx",lineNumber:296,columnNumber:19},void 0),e.jsxDEV("span",{className:"font-medium",children:l.length},void 0,!1,{fileName:"/app/code/src/components/SafariTestPage.jsx",lineNumber:297,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/src/components/SafariTestPage.jsx",lineNumber:295,columnNumber:17},void 0),e.jsxDEV("div",{className:"flex justify-between",children:[e.jsxDEV("span",{children:"Safari Simulation:"},void 0,!1,{fileName:"/app/code/src/components/SafariTestPage.jsx",lineNumber:300,columnNumber:19},void 0),e.jsxDEV("span",{className:`font-medium ${i?"text-green-600":"text-gray-600"}`,children:i?"Enabled":"Disabled"},void 0,!1,{fileName:"/app/code/src/components/SafariTestPage.jsx",lineNumber:301,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/src/components/SafariTestPage.jsx",lineNumber:299,columnNumber:17},void 0),e.jsxDEV("div",{className:"flex justify-between",children:[e.jsxDEV("span",{children:"EmailJS Status:"},void 0,!1,{fileName:"/app/code/src/components/SafariTestPage.jsx",lineNumber:306,columnNumber:19},void 0),e.jsxDEV("span",{className:`font-medium ${window.emailjs?"text-green-600":"text-red-600"}`,children:window.emailjs?"Loaded":"Not Loaded"},void 0,!1,{fileName:"/app/code/src/components/SafariTestPage.jsx",lineNumber:307,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/src/components/SafariTestPage.jsx",lineNumber:305,columnNumber:17},void 0),e.jsxDEV("div",{className:"flex justify-between",children:[e.jsxDEV("span",{children:"Saved Errors:"},void 0,!1,{fileName:"/app/code/src/components/SafariTestPage.jsx",lineNumber:312,columnNumber:19},void 0),e.jsxDEV("span",{className:"font-medium",children:V().length},void 0,!1,{fileName:"/app/code/src/components/SafariTestPage.jsx",lineNumber:313,columnNumber:19},void 0)]},void 0,!0,{fileName:"/app/code/src/components/SafariTestPage.jsx",lineNumber:311,columnNumber:17},void 0)]},void 0,!0,{fileName:"/app/code/src/components/SafariTestPage.jsx",lineNumber:294,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/SafariTestPage.jsx",lineNumber:291,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/SafariTestPage.jsx",lineNumber:239,columnNumber:11},void 0),Object.keys(u).length>0&&e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("h2",{className:"text-lg font-semibold text-gray-800",children:"Test Results"},void 0,!1,{fileName:"/app/code/src/components/SafariTestPage.jsx",lineNumber:321,columnNumber:15},void 0),e.jsxDEV("div",{className:"grid md:grid-cols-2 gap-4",children:Object.entries(u).map(([a,n])=>e.jsxDEV("div",{children:T(a,n)},a,!1,{fileName:"/app/code/src/components/SafariTestPage.jsx",lineNumber:324,columnNumber:19},void 0))},void 0,!1,{fileName:"/app/code/src/components/SafariTestPage.jsx",lineNumber:322,columnNumber:15},void 0)]},void 0,!0,{fileName:"/app/code/src/components/SafariTestPage.jsx",lineNumber:320,columnNumber:13},void 0)]},void 0,!0,{fileName:"/app/code/src/components/SafariTestPage.jsx",lineNumber:233,columnNumber:9},void 0),e.jsxDEV(y,{isVisible:N},void 0,!1,{fileName:"/app/code/src/components/SafariTestPage.jsx",lineNumber:334,columnNumber:9},void 0)]},void 0,!0,{fileName:"/app/code/src/components/SafariTestPage.jsx",lineNumber:232,columnNumber:7},void 0)},void 0,!1,{fileName:"/app/code/src/components/SafariTestPage.jsx",lineNumber:231,columnNumber:5},void 0)};export{K as default};
